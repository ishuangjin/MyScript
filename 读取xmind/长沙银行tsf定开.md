# 长沙银行tsf定开

## 资源概览

### 资源概览页面视图优化

- 在“资源概览”区域中新增“服务实例数”（查询“服务治理”中在线数量及下线数量），当离线数>0时对应字体修改为红色字体；

	- 步骤：
	1.观察“资源概览”区域中是否新增“服务实例数”
	2.观察“服务实例数”下是否显示“下线”
	3.观察下线数为0和大于0时的字体颜色
	- 结果：
	1.新增“服务实例数”，值与“服务治理”中在线实例数一致
	2.有显示“下线”，值与“服务治理”中下线实例数一致
	3.下线实例数为0时，字体颜色黑色；下线实例数大于0时，字体颜色红色

- 在“运行服务”中增加“离线”服务数，当离线数>0时对应字体修改为红色字体；

	- 步骤：
1.观察“运行服务”中是否增加“离线”服务数
2.观察离线数为0和大于0时的字体颜色
	- 结果：
	1.有增加“离线”服务数，值与实际离线服务数一致
	2.离线服务数为0时，字体颜色黑色；离线服务数大于0时，字体颜色红色

- 当“集群”中当“异常集群”值>0时对应字体修改为红色字体；

	- 步骤：
观察“集群”中当“异常集群”值为0和大于0时的字体颜色
	- 结果：
“集群”中“异常集群”值为0时，字体颜色黑色；“集群”中“异常集群”值大于0时，字体颜色红色

- 当“云主机”中“不可用主机”值>0时对应字体修改为红色字体；

	- 步骤：
观察“云主机”中“不可用主机”值为0和大于0时的字体颜色
	- 结果：
“云主机”中“不可用主机”值为0时，字体颜色黑色；“云主机”中“不可用主机”值大于0时，字体颜色红色

- 当“部署组”中“异常”值>0时对应字体修改为红色字体；

	- 步骤：
观察“部署组”中“异常”值为0和大于0时的字体颜色
	- 结果：
“部署组”中“异常”值为0时，字体颜色黑色；“部署组”中“异常”值大于0时，字体颜色红色

- 在“应用数”中新增“已部署”(当前应用已创建部署组),“未部署”(当前应用未创建部署组)；

	- 步骤：
1.观察“应用数”中是否新增“已部署”
2.观察“应用数”中是否新增“未部署”
	- 结果：
1.新增“已部署”，值与“应用管理”中已创建部署组的应用数一致
2.新增“未部署”，值与“应用管理”中未创建部署组的应用数一致

## TSF微服务平台-总概览	

### 架构概览

- 双中心展示

	- 步骤：
进入到“架构概览”页面，观察页面展示
	- 结果：
页面中统计双中心的中应用类型的分布以及应用信息

- 统计应用的个数

	- 步骤：
1.观察是否展示不同中心应用类型的统计数据
2.观察柱形图是否展示正确
3.观察是否有相应列表统计对应的数量，点击展开按钮观察详细应用
	- 结果：
1.展示不同中心中应用类型的统计数据，包含普通应用、原生应用、Mesh应用、微服务网关应用，且数量与实际一致
2.通过柱形图分别展示不同应用的数量
3.通过列表形式统计对应的数量，点击右侧展开，展示详细应用

### 服务概览

- 双中心展示

	- 步骤：
进入到“服务概览”页面，观察页面展示
	- 结果：
统计双中心对应的服务分布、服务监控、服务指标TOP10 统计数据

- 服务分布

	- 步骤：
1.观察页面中统计的数据
2.观察应用数统计
3.观察服务数统计
4.观察云主机统计
5.观察业务服务数统计
6.鼠标悬浮在饼图上，观察是否展示详细信息
	- 结果：
1.主要数据分为应用数统计、服务数统计、云主机统计、业务系统服务数统计；
2.应用数统计：应用数统计双中心（望城中心与滨江中心）应用总数及各中心数量，且数量与实际一致
3.服务数统计：服务数统计双中心（望城中心与滨江中心）服务总数及各中心数量，且数量与实际一致
4.云主机统计：云主机数统计双中心（望城中心与滨江中心）云主机总数及各中心数量，且数量与实际一致
5.业务服务数统计：各个命名空间内部署组的数量，占总部署组数量的百分比，通过饼图展示，业务服务数与实际一致。
6.鼠标悬浮后，展示详细信息，包含数量及占用百分比

- 服务监控

	- 步骤：
1.观察是否分别展示双中心的监控数据
2.观察请求量、请求错误率、慢请求数图表是否展示无误
3.鼠标悬浮到监控图标上，观察是否展示详细信息
	- 结果：
1.分别统计望城中心、滨江中心的监控数据
2.包含请求量、请求错误率、慢请求数
3.鼠标悬浮到监控图标上时，展示详细信息

- 服务指标统计TOP10

	- 步骤：
1.观察是否分别展示两中心的服务指标统计TOP10
2.点击服务/接口按钮观察是否能够切换展示数据
3.观察默认展示的数据，观察是否展示服务请求量、请求错误率、请求平均响应耗时TOP10数据
4.切换为接口数据，观察是否展示接口请求量、请求错误率、请求平均响应耗时TOP10数据
5.分别点击请求量、请求错误率、平均响应耗时表头，观察是否能够对TOP10数据进行排序
	- 结果：
1.分别统计望城中心、滨江中心服务
2.点击服务/接口按钮能够切换展示数据
3.默认展示服务数据，展示服务请求量、请求错误率、请求平均响应耗时TOP10数据
4.切换为接口数据后，展示接口请求量、请求错误率、请求平均响应耗时TOP10数据
5.能够分别对请求量、请求错误率、平均响应耗时TOP10数据进行排序

### 平台概览

- 步骤：
1.进入到“平台概览”页面，观察是否能够统计双中心对应的数据
2.统计数据校验
- 结果：
1.可通过“中心列表”下啦选择全部或望城中心、滨江中心查询数据信息；
2.统计双中心对应的资源概览、服务监控、请求量、请求错误率、平均响应耗时、服务指标统计TOP10、近24小时异常告警信息，且数据与实际一致

### 数据中心

- 步骤：
1.观察是否提供不同入口分别进入到两中心的微服务平台概览页面
2.页面内容是否与实际一致
- 结果：
1.提供望城中心和滨江中心两个入口. 点击后进入到对应中心的微服务平台概览页面
2.页面内容与实际一致

## 权限控制	

### 普通用户

- 管理员已授权并关联租户的新用户登录成功

	- 前置：
管理员已授权并关联租户的新用户
	- 步骤：
1.打开tsf登录地址，跳转到行内认证中心，输入普通用户账号信息
2.用户认证通过后选择中心，选择环境登录
3.观察右上角中心信息、环境信息是否展示正确
	- 结果：
1.跳转到“登录环境选择页”
2.登录成功后会进入到微服务平台（TSF）概览页面
3.展示当前登录的平台信息及环境信息，且信息展示正确

- 管理员未授权的新用户不能登录TSF

	- 前置：
	1.管理员未授权的新用户
	2.用户认证通过后“登录环境选择页”
	- 步骤：
	1.登录TSF
	2.使用管理员授权该用户并关联租户
	3.再次登录TSF
	- 结果：
1. 不能登录
2. 成功授权并关联租户
提示“该账户下没有租户信息，请联系管理员开通”
3. 授权并关联租户后能够登录

- 切换账号

	- 前置：
1.管理员已授权并关联租户的新用户
2.用户认证通过后“登录环境选择页”
	- 步骤：
点击“切换账号“，使用其他账号登录
	- 结果：
输入其他账户的用户名密码后能够跳转到“登录环境选择页”

### 管理员用户登录成功

- 前置：
1.用户是管理员用户
2.Admin用户（目前仅支持Admin用户在平台管理员租户下查看TSF微服务平台-总概览的相关信息）
3.已将admin用户与单点登录认证中心的一个账户绑定
- 步骤：
1.打开微服务平台（TSF）登录地址，进入单点登录入口，输入绑定的管理员用户账号信息
2.点击“TSF微服务平台-总概览”
- 结果：
1.登录成功，进入到微服务平台（TSF） TSF Stack页面
2.进入到“TSF微服务平台-总概览”页面

## 切换租户	

### 用户登录到微服务平台后可完成租户切换

- 步骤：
1.观察tsf平台右上角菜单是否新增“切换租户”按钮
2.点击“切换租户”按钮
- 结果：
1.存在“切换租户”按钮
2.进入到“登录环境确认页”进行中心、环境选择进入微服务平台

## 租户节点汇总-运营端

### 运营中心-运营工具-租户节点管理新增配额使用情况汇总，以及总配额展示

- 步骤：
1.观察”租户节点管理“页面
2.分配1个节点，观察已使用数量是否增加1个
3.达到总配额数后继续分配节点，观察是否能够分配成功
- 结果：
1.展示总配额、已使用数量
2.每使用一个节点，页面已使用数量相应增加1个
3.分配失败

